---
title: "Verilog case语句"
date: "2024-03-04" # 格式为 YYYY-MM-DD
categories: LoGi
tags:
  - AI
  - 电路基础知识
summary: "case语句有不同的变种，应对高阻与不定值"
author: "ChatGPT"
---
# Verilog case语句

在 **Verilog** 中，`case` 语句是一种多分支选择语句，通常用于实现多路复用器。它检查给定的表达式是否与列表中的其他表达式之一匹配，并根据匹配情况执行相应的分支。如果有许多条件需要检查，使用多分支的 `if-else` 构造可能不合适，因为这会被综合成优先级编码器而不是多路复用器²。

`case` 语句的一般形式如下：

```verilog
case (表达式)
    case_item_1: begin
        // 执行语句
    end
    case_item_2: begin
        // 执行语句
    end
    // 更多 case_item...
    default: begin
        // 默认执行语句
    end
endcase
```

- 在 `case` 语句中，敏感表达式与各项值之间的比较是一种全等比较，每一位都相同才认为匹配。
- 在 `casez` 语句中，如果分支表达式某些位的值为高阻 `z`，那么对这些位的比较会忽略，只关注其他位的比较结果。
- 在 `casex` 语句中，除了忽略高阻 `z`，还会忽略不定值 `x`，只关注其他位的比较结果。

综合工具会将 `case`、`casez` 和 `casex` 统一处理，所以在综合出的电路中，它们的效果是一样的¹³⁵。

总结：
- 尽量使用 `casez`，少用 `casex`。
- 在电路中，可以用 `?` 来表示无关值的 `z`。
- `case` 的描述匹配是从上到下进行的。
- `casez` 可以处理不考虑高阻值 `z` 的比较过程。
- `casex` 不会关心 `x` 和 `z`，只管不是大大情况来匹配。

请注意，这里的 `case` 语句是可综合的，但在仿真时，不同的输入会产生不同的结果，因此在实际写代码时，需要根据具体情况选择合适的语句。