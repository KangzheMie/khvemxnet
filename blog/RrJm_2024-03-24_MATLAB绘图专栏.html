
<script>
    window.location.href = '/index.html?page=./blog/RrJm_2024-03-24_MATLAB绘图专栏.html';
</script>
<h1 id="matlab绘图">MATLAB绘图</h1>
<p>关于绘图函数、句柄参数的信息请参考如下的matlab文档：</p>
<p>「Axes Properties」：坐标轴</p>
<p>「Line Properties」：plot函数</p>
<p>「ErrorBar Properties」：ErrorBar函数</p>
<p>….</p>
<h2 id="优化坐标轴可视参数">优化坐标轴可视参数</h2>
<div class="sourceCode" id="cb1"><pre
class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="va">customizeAxes</span>(<span class="va">ax</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">% 检查输入是否为轴对象</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="op">~</span><span class="va">isa</span>(<span class="va">ax</span><span class="op">,</span> <span class="ss">&#39;matlab.graphics.axis.Axes&#39;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">error</span>(<span class="ss">&#39;Input must be an axes object&#39;</span>)<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">% 设置轴的属性</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">XLim</span> <span class="op">=</span> [<span class="fl">150</span> <span class="fl">550</span>]<span class="op">;</span> <span class="co">% X轴范围</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">FontSize</span> <span class="op">=</span> <span class="fl">16</span><span class="op">;</span> <span class="co">% 字体大小</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">XGrid</span> <span class="op">=</span> <span class="ss">&#39;on&#39;</span><span class="op">;</span> <span class="co">% 开启X轴网格</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">YGrid</span> <span class="op">=</span> <span class="ss">&#39;on&#39;</span><span class="op">;</span> <span class="co">% 开启Y轴网格</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">XMinorGrid</span> <span class="op">=</span> <span class="ss">&#39;on&#39;</span><span class="op">;</span> <span class="co">% 开启X轴次级网格</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">YMinorGrid</span> <span class="op">=</span> <span class="ss">&#39;on&#39;</span><span class="op">;</span> <span class="co">% 开启Y轴次级网格</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">GridColor</span> <span class="op">=</span> [<span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span>]<span class="op">;</span> <span class="co">% 网格颜色</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">GridAlpha</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">;</span> <span class="co">% 网格透明度</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">MinorGridColor</span> <span class="op">=</span> [<span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span>]<span class="op">;</span> <span class="co">% 次级网格颜色</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">MinorGridAlpha</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">;</span> <span class="co">% 次级网格透明度</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">LineWidth</span> <span class="op">=</span> <span class="fl">1.0</span><span class="op">;</span> <span class="co">% 线宽</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="绘制平均值-标准差-最值图像">绘制平均值-标准差-最值图像</h2>
<div class="sourceCode" id="cb2"><pre
class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="va">mean_std_plot</span>(<span class="va">X</span><span class="op">,</span><span class="va">Y_mean</span><span class="op">,</span><span class="va">Y_std</span><span class="op">,</span><span class="va">Y_max</span><span class="op">,</span><span class="va">Y_min</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">% 确定生成出来的图像框的位置和大小</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">figure</span>(<span class="ss">&#39;Position&#39;</span><span class="op">,</span> [<span class="fl">100</span><span class="op">,</span> <span class="fl">100</span><span class="op">,</span> <span class="fl">1200</span><span class="op">,</span> <span class="fl">850</span>])<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">hold</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">% 插值并绘制曲线</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">xInterp</span> <span class="op">=</span> <span class="va">linspace</span>(<span class="va">min</span>(<span class="va">X</span>)<span class="op">,</span> <span class="va">max</span>(<span class="va">X</span>)<span class="op">,</span> <span class="fl">100</span>)<span class="op">;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">yInterp</span> <span class="op">=</span> <span class="va">interp1</span>(<span class="va">X</span><span class="op">,</span> <span class="va">Y_mean</span><span class="op">,</span> <span class="va">xInterp</span><span class="op">,</span> <span class="ss">&#39;spline&#39;</span>)<span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">xInterp</span><span class="op">,</span> <span class="va">yInterp</span><span class="op">,</span> <span class="ss">&#39;--k&#39;</span>)<span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">% 绘制最大值到最小值的线段</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">X</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        <span class="va">plot</span>([<span class="va">X</span>(<span class="va">i</span>)<span class="op">,</span> <span class="va">X</span>(<span class="va">i</span>)]<span class="op">,</span> [<span class="va">Y_min</span>(<span class="va">i</span>)<span class="op">,</span> <span class="va">Y_max</span>(<span class="va">i</span>)]<span class="op">,</span> <span class="ss">&#39;-r&#39;</span><span class="op">,</span><span class="ss">&#39;LineWidth&#39;</span><span class="op">,</span><span class="fl">1.1</span>)<span class="op">;</span> <span class="co">% 使用黑色线段表示最值范围</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">% 绘制散点图和误差条</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="va">errorbar</span>(<span class="va">X</span><span class="op">,</span> <span class="va">Y_mean</span><span class="op">,</span> <span class="va">Y_std</span><span class="op">,</span><span class="ss">&#39;xb&#39;</span><span class="op">,</span><span class="ss">&#39;LineWidth&#39;</span><span class="op">,</span><span class="fl">1.1</span><span class="op">,</span><span class="ss">&#39;MarkerSize&#39;</span><span class="op">,</span><span class="fl">5</span><span class="op">,</span><span class="ss">&#39;CapSize&#39;</span><span class="op">,</span><span class="fl">10</span>)<span class="op">;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="va">grid</span> <span class="va">on</span><span class="op">;</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="va">grid</span> <span class="va">minor</span><span class="op">;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="va">hold</span> <span class="va">off</span><span class="op">;</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="绘制热力图">绘制热力图</h2>
<div class="sourceCode" id="cb3"><pre
class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">&#39;Position&#39;</span><span class="op">,</span> [<span class="fl">100</span><span class="op">,</span> <span class="fl">100</span><span class="op">,</span> <span class="fl">500</span><span class="op">,</span> <span class="fl">500</span>])<span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="va">h</span> <span class="op">=</span> <span class="va">heatmap</span>(<span class="va">Amean</span>)<span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="va">h</span>.<span class="va">XData</span> <span class="op">=</span> {<span class="ss">&#39;CH1&#39;</span><span class="op">,</span><span class="ss">&#39;CH2&#39;</span><span class="op">,</span><span class="ss">&#39;CH3&#39;</span>}<span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="va">h</span>.<span class="va">YData</span> <span class="op">=</span> {<span class="ss">&#39;#1&#39;</span><span class="op">,</span><span class="ss">&#39;#3&#39;</span><span class="op">,</span><span class="ss">&#39;#4&#39;</span><span class="op">,</span><span class="ss">&#39;#5&#39;</span>}<span class="op">;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="va">h</span>.<span class="va">Title</span> <span class="op">=</span> <span class="st">&quot;数据平均值&quot;</span><span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="va">h</span>.<span class="va">XLabel</span> <span class="op">=</span> <span class="st">&quot;通道&quot;</span><span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="va">h</span>.<span class="va">YLabel</span> <span class="op">=</span> <span class="st">&quot;编号&quot;</span><span class="op">;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="va">h</span>.<span class="va">FontSize</span> <span class="op">=</span> <span class="fl">16</span><span class="op">;</span></span></code></pre></div>
<h2 id="绘制bar图">绘制bar图</h2>
<div class="sourceCode" id="cb4"><pre
class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span>(<span class="ss">&#39;Position&#39;</span><span class="op">,</span> [<span class="fl">100</span><span class="op">,</span> <span class="fl">100</span><span class="op">,</span> <span class="fl">500</span><span class="op">,</span> <span class="fl">500</span>])<span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="va">X</span> <span class="op">=</span> <span class="va">categorical</span>({<span class="ss">&#39;#1&#39;</span><span class="op">,</span><span class="ss">&#39;#3&#39;</span><span class="op">,</span><span class="ss">&#39;#4&#39;</span><span class="op">,</span><span class="ss">&#39;#5&#39;</span>})<span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="va">bar</span>(<span class="va">X</span><span class="op">,</span><span class="va">Amean</span><span class="op">,</span><span class="ss">&#39;LineWidth&#39;</span><span class="op">,</span><span class="fl">0.8</span> <span class="op">,</span><span class="ss">&#39;BarWidth&#39;</span><span class="op">,</span><span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span> <span class="op">=</span> <span class="va">gca</span><span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">FontSize</span> <span class="op">=</span> <span class="fl">16</span><span class="op">;</span> <span class="co">% 字体大小</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">XGrid</span> <span class="op">=</span> <span class="ss">&#39;on&#39;</span><span class="op">;</span> <span class="co">% 开启X轴网格</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">YGrid</span> <span class="op">=</span> <span class="ss">&#39;on&#39;</span><span class="op">;</span> <span class="co">% 开启Y轴网格</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">XMinorGrid</span> <span class="op">=</span> <span class="ss">&#39;on&#39;</span><span class="op">;</span> <span class="co">% 开启X轴次级网格</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">YMinorGrid</span> <span class="op">=</span> <span class="ss">&#39;on&#39;</span><span class="op">;</span> <span class="co">% 开启Y轴次级网格</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">GridColor</span> <span class="op">=</span> [<span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span>]<span class="op">;</span> <span class="co">% 网格颜色</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">GridAlpha</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">;</span> <span class="co">% 网格透明度</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">MinorGridColor</span> <span class="op">=</span> [<span class="fl">0</span> <span class="fl">0</span> <span class="fl">0</span>]<span class="op">;</span> <span class="co">% 次级网格颜色</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">MinorGridAlpha</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">;</span> <span class="co">% 次级网格透明度</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">LineWidth</span> <span class="op">=</span> <span class="fl">1.0</span><span class="op">;</span> <span class="co">% 线宽</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="st">&quot;编号&quot;</span>)<span class="op">;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="st">&quot;ADU&quot;</span>)<span class="op">;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="st">&quot;数据平均值&quot;</span>)<span class="op">;</span></span></code></pre></div>
