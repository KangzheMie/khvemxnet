
<script>
    window.location.href = '/index.html?page=./blog/RrJm_2024-04-01_bat文件与cmd编码.html';
</script>
<h1 id="bat文件与cmd编码">bat文件与cmd编码</h1>
<h2 id="bat定义">bat定义</h2>
<p>BAT文件，全称为批处理文件（Batch
File），是一种包含一系列命令的文本文件，用于批量执行命令或任务。</p>
<p><strong>工作方式：</strong> 1. <strong>文本文件：</strong>
BAT文件是纯文本文件，可以使用文本编辑器打开和编辑。 2.
<strong>命令序列：</strong>
BAT文件包含一系列命令，每个命令占据一行。这些命令可以是任何可在命令提示符下执行的命令，例如复制文件、移动文件、运行程序等。
3. <strong>逐行执行：</strong>
当运行BAT文件时，系统会逐行执行其中的命令，按照文件中的顺序依次执行。 4.
<strong>自动化任务：</strong>
BAT文件常用于自动化任务，例如批量处理文件、设置环境变量、执行备份等。 5.
<strong>简化操作：</strong>
通过BAT文件，用户可以简化重复性操作，提高工作效率，尤其适用于需要重复执行相同任务的情况。</p>
<p><strong>使用注意事项：</strong> - <strong>编码格式：</strong>
BAT文件的编码格式应与系统的命令提示符（CMD）的<strong>编码格式匹配</strong>，以确保正常运行。
- <strong>权限：</strong>
BAT文件的运行<strong>权限受限于用户</strong>的权限设置，可能需要以管理员身份运行才能执行某些命令或任务。
- <strong>稳定性：</strong>
编写BAT文件时应注意<strong>命令的稳定性和兼容性</strong>，以避免意外错误或不良影响。</p>
<h2 id="确定bat文件的编码">确定bat文件的编码</h2>
<p>可以使用文本编辑器来确定BAT文件的编码格式。</p>
<p>打开BAT文件，可以使用Windows自带的记事本（Notepad）或者更强大的文本编辑器，比如Notepad++或Visual
Studio Code。</p>
<p>大多数文本编辑器都会在界面的某个地方显示当前文件的编码格式。在Notepad++中，您可以在“格式”菜单下的“转换为UTF-8”中查看当前编码格式。在Visual
Studio Code中，可以在右下角找到编码格式信息，点击可以切换编码格式。</p>
<p>如果文本编辑器无法显示编码格式，也可以尝试另存为其他编码格式，比如UTF-8或者ANSI，然后查看文件的变化。</p>
<h2 id="cmd编码与修改">cmd编码与修改</h2>
<p>常用编码及其对应的键值，包括一些东亚地区可能用到的编码：</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>encoding_dict <span class="op">=</span> {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;ANSI&#39;</span>: <span class="dv">437</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;UTF-8&#39;</span>: <span class="dv">65001</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Unicode (UTF-16 小端)&#39;</span>: <span class="dv">1200</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Unicode (UTF-16 大端)&#39;</span>: <span class="dv">1201</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Unicode (UTF-32 小端)&#39;</span>: <span class="dv">12000</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Unicode (UTF-32 大端)&#39;</span>: <span class="dv">12001</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;简体中文 (GB2312)&#39;</span>: <span class="dv">936</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;繁体中文 (Big5)&#39;</span>: <span class="dv">950</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;韩文 (EUC-KR)&#39;</span>: <span class="dv">51949</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (Shift-JIS)&#39;</span>: <span class="dv">932</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (EUC-JP)&#39;</span>: <span class="dv">20932</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (ISO-2022-JP)&#39;</span>: <span class="dv">50220</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (ISO-2022-JP-1)&#39;</span>: <span class="dv">50221</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (ISO-2022-JP-2)&#39;</span>: <span class="dv">50222</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (UTF-8)&#39;</span>: <span class="dv">65001</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (UTF-16 小端)&#39;</span>: <span class="dv">1200</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (UTF-16 大端)&#39;</span>: <span class="dv">1201</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (UTF-32 小端)&#39;</span>: <span class="dv">12000</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;日文 (UTF-32 大端)&#39;</span>: <span class="dv">12001</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;台湾正体中文 (Big5)&#39;</span>: <span class="dv">950</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;韩文 (UTF-8)&#39;</span>: <span class="dv">65001</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>通过更改注册表来修改CMD的默认编码设置。以下是具体步骤：</p>
<p><strong>打开注册表编辑器：</strong>
按下<code>Win + R</code>键打开“运行”对话框，输入<code>regedit</code>并按Enter打开注册表编辑器。</p>
<p><strong>导航到CMD的设置位置：</strong>
在注册表编辑器中，导航到以下位置：</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Command Processor</span></code></pre></div>
<p><strong>创建新的字符串值：</strong>
在右侧窗口中，右键单击空白处，选择“新建” -&gt; “字符串值”。</p>
<p><strong>命名新的字符串值：</strong>
将新字符串值命名为<code>Autorun</code>。</p>
<p><strong>设置CMD编码：</strong>
双击新创建的字符串值<code>Autorun</code>，在数值数据字段中输入以下命令来设置CMD的编码：</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">chcp</span> <span class="kw">&lt;</span>codepage<span class="kw">&gt;</span></span></code></pre></div>
<p>其中<code>&lt;codepage&gt;</code>是您希望设置的代码页。例如，要将编码设置为UTF-8，您可以输入<code>chcp 65001</code>。</p>
<p><strong>保存更改并关闭注册表编辑器：</strong>
完成更改后，单击“确定”保存新值，然后关闭注册表编辑器。</p>
<p><strong>重新启动CMD：</strong>
重新启动CMD窗口以应用新的编码设置。</p>
