
<script>
  if (window.location.href.indexOf('?page=RrJm_2024-04-14_Ubuntu列表权限显示') === -1) {
    window.location.href = '/index.html?page=./blog/RrJm_2024-04-14_Ubuntu列表权限显示.html';
  }
</script>
<h1 id="ubuntu列表权限显示">Ubuntu列表权限显示</h1>
<h2 id="ls--l-输出的格式解释"><code>ls -l</code> 输出的格式解释</h2>
<p>当您在终端输入 <code>ls -l</code>
并执行时，您将看到如下格式的输出：</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">-rwxr-xr-x</span>  5 root root 4096 Jan 21 07:30 example.txt</span></code></pre></div>
<p>每一部分的含义如下：</p>
<ol type="1">
<li><strong>文件类型和权限</strong>（<code>-rwxr-xr-x</code>）：
<ul>
<li>第一个字符表示文件类型（如 <code>-</code>
表示普通文件，<code>d</code> 表示目录，<code>l</code>
表示符号链接等）。</li>
<li>接下来的三个字符（<code>rwx</code>）表示所有者（owner）的权限（读、写、执行）。</li>
<li>紧接着的三个字符（<code>r-x</code>）表示组（group）的权限。</li>
<li>最后三个字符（<code>r-x</code>）表示其他用户（others）的权限。</li>
</ul></li>
<li><strong>链接数</strong>（<code>5</code>）：
<ul>
<li>表示有多少硬链接指向这个inode。对于目录，这个数字包括目录本身和其中的每个子目录的
<code>.</code> 链接。</li>
</ul></li>
<li><strong>文件所有者</strong>（<code>root</code>）：
<ul>
<li>文件的所有者的用户名。</li>
</ul></li>
<li><strong>文件所属组</strong>（<code>root</code>）：
<ul>
<li>文件所属的组名。</li>
</ul></li>
<li><strong>文件大小</strong>（<code>4096</code>）：
<ul>
<li>文件的大小，单位通常是字节（Bytes）。</li>
</ul></li>
<li><strong>最后修改时间</strong>（<code>Jan 21 07:30</code>）：
<ul>
<li>文件最后被修改的日期和时间。</li>
</ul></li>
<li><strong>文件名</strong>（<code>example.txt</code>）：
<ul>
<li>文件或目录的名称。</li>
</ul></li>
</ol>
<h3 id="额外的信息">额外的信息</h3>
<ul>
<li><strong>颜色编码</strong>：许多现代的终端和Shell环境会使用颜色来区分不同类型的文件。例如，目录可能显示为蓝色，可执行文件为绿色，符号链接为青色等。</li>
<li><strong>额外的参数</strong>：<code>ls</code>
命令可以与许多参数结合使用来改变其输出的详细程度或格式，例如
<code>ls -lh</code> 会以更易读的格式显示文件大小（如KB, MB）。</li>
</ul>
<h2 id="链接">链接</h2>
<h3 id="软链接符号链接">软链接（符号链接）</h3>
<ul>
<li><strong>定义</strong>：软链接是一种特殊类型的文件，它包含指向另一个文件或目录的路径。它类似于Windows中的快捷方式。</li>
<li><strong>显示</strong>：使用 <code>ls -l</code>
命令查看软链接时，它的第一个字符是
<code>l</code>，表示这是一个链接。在链接信息中，它会显示为
<code>link -&gt; target</code>，其中 <code>link</code>
是链接的名称，<code>target</code> 是它指向的目标文件或目录的路径。</li>
<li><strong>特点</strong>：如果删除了软链接指向的原始文件，软链接将变成“死链接”，指向一个不存在的路径。软链接可以跨文件系统创建。</li>
</ul>
<h3 id="硬链接">硬链接</h3>
<ul>
<li><strong>定义</strong>：硬链接是一个文件的额外名称，它直接连接到文件系统中的数据。创建硬链接时，它与原始文件共享相同的inode（文件系统中的索引节点）。</li>
<li><strong>显示</strong>：在使用 <code>ls -l</code>
命令时，硬链接显示为普通文件。它没有特殊的标识符来直接表明这是一个硬链接。不过，可以通过查看链接数（inode引用计数）来识别可能的硬链接。如果一个文件的链接数大于1（通常在文件权限后的那个数字），这可能表示该文件有一个或多个硬链接。</li>
<li><strong>特点</strong>：硬链接不能跨文件系统创建。如果删除了原始文件的一个硬链接，其他的链接仍然可以访问该文件的内容，因为数据仍然保留在磁盘上。</li>
</ul>
<h2 id="文件链接数">文件链接数</h2>
<p>在UNIX和类UNIX系统中，目录的链接数大于1并不是因为目录是硬链接的结果。实际上，UNIX系统中不允许用户创建指向目录的硬链接，这是为了避免产生潜在的环路，这样的环路会使文件系统的遍历变得复杂和可能无限。</p>
<p>目录的链接数大于1通常是由于以下几个原因：</p>
<ol type="1">
<li><p><strong>目录自身的链接</strong>：每个目录都有至少两个硬链接。一个是目录本身的名字，另一个是目录内的
<code>.</code>（点）文件。<code>.</code>
是一个特殊的文件，代表目录自己。</p></li>
<li><p><strong>子目录的回指链接</strong>：如果一个目录内有子目录（不包括符号链接），每个子目录都会有一个名为
<code>..</code>
的入口，这是一个硬链接，指向其父目录。这就是为什么当您创建一个新的子目录时，父目录的链接数会增加。</p></li>
</ol>
<p>以 <code>/tmp</code> 目录为例，它的链接数大于1通常是因为：</p>
<ul>
<li><code>/tmp/</code> 自身（1个链接）</li>
<li><code>/tmp/.</code> 指向自身的链接（1个链接）</li>
<li><code>/tmp/..</code> 在根目录 <code>/</code> 中为 <code>/</code>
的链接（通常不增加 <code>/tmp</code> 的链接数，但归因于根目录）</li>
<li>如果 <code>/tmp</code> 下有子目录，每个子目录的 <code>..</code>
也会增加 <code>/tmp</code> 的链接数。</li>
</ul>
