
<script>
    window.location.href = '/index.html?page=./blog/RrJm_2024-04-16_Linux搭建LNMP.html';
</script>
<h1 id="linux搭建lnmp">Linux搭建LNMP</h1>
<p>在Ubuntu系统上搭建LNMP（Linux, Nginx, MySQL, PHP）网站服务器。</p>
<h3 id="第一步系统更新">第一步：系统更新</h3>
<p>在开始之前，确保的Ubuntu系统是最新的。这可以通过运行以下命令来完成：</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update <span class="kw">&amp;&amp;</span> <span class="fu">sudo</span> apt upgrade <span class="at">-y</span></span></code></pre></div>
<p>这将确保所有已安装的软件包是最新的，并且系统没有已知的安全漏洞。</p>
<h3 id="第二步安装nginx">第二步：安装Nginx</h3>
<p>Nginx是一种高性能的Web服务器软件，它也可以作为反向代理服务器和负载均衡器使用。安装Nginx可以通过以下命令完成：</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install nginx <span class="at">-y</span></span></code></pre></div>
<p>安装完成后，可以通过运行以下命令来检查Nginx服务的状态：</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> status nginx</span></code></pre></div>
<p>如果服务正在运行，可以在Web浏览器中输入服务器的IP地址来测试Nginx服务器是否正常工作。应该能看到Nginx的默认欢迎页面。</p>
<h3 id="第三步安装mysql">第三步：安装MySQL</h3>
<p>MySQL是一个广泛使用的关系型数据库管理系统。在Ubuntu上安装MySQL，可以使用以下命令：</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install mysql-server <span class="at">-y</span></span></code></pre></div>
<p>安装完成后，应运行一个安全脚本来改善MySQL数据库的安全性：</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mysql_secure_installation</span></code></pre></div>
<p>按照提示进行操作，设置root用户密码，移除匿名用户，禁止root用户远程访问，并删除测试数据库。</p>
<h3 id="第四步安装php">第四步：安装PHP</h3>
<p>PHP是一种广泛使用的开放源代码脚本语言，尤其适用于Web开发并可以嵌入到HTML中。安装PHP及其与Nginx配合使用的必要模块：</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install php-fpm php-mysql <span class="at">-y</span></span></code></pre></div>
<p>安装完毕后，需要进行少量配置，使PHP与Nginx配合工作。打开默认的Nginx配置文件：</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nano /etc/nginx/sites-available/default</span></code></pre></div>
<p>确保的配置文件中有以下部分来处理PHP请求：</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">location</span> ~ <span class="dt">\.</span>php$ {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">include</span> snippets/fastcgi-php.conf<span class="kw">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">fastcgi_pass</span> unix:/var/run/php/php7.4-fpm.sock<span class="kw">;</span>  <span class="co"># 注意PHP版本号可能需要调整</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">fastcgi_index</span> index.php<span class="kw">;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">include</span> fastcgi_params<span class="kw">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span></code></pre></div>
<p>完成后，重启Nginx以应用更改：</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart nginx</span></code></pre></div>
<h3 id="第五步测试php">第五步：测试PHP</h3>
<p>创建一个PHP文件来测试PHP是否正常工作：</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;&lt;?php phpinfo(); ?&gt;&quot;</span> <span class="kw">|</span> <span class="fu">sudo</span> tee /var/www/html/info.php</span></code></pre></div>
<p>然后在Web浏览器中输入
<code>http://your_server_ip/info.php</code>。应该能看到PHP的配置和版本信息。</p>
